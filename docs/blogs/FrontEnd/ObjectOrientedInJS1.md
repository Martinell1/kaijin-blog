---
title: JavaScriptä¸­çš„é¢å¯¹å¯¹è±¡ï¼ˆä¸€ï¼‰
date: '2021-10-08 22:54:53'
categories:
 - FrontEnd
tags:
 - JS
 - å¯¹è±¡
 - åŸå‹/åŸå‹é“¾
---



## å¯¹è±¡

> ECMA-262å°†å¯¹è±¡å®šä¹‰ä¸ºä¸€ç»„å±æ€§çš„æ— åºé›†åˆã€‚ä¸¥æ ¼æ¥è¯´ï¼Œè¿™æ„å‘³ç€å¯¹è±¡å°±æ˜¯ä¸€ç»„æ²¡æœ‰ç‰¹å®šé¡ºåºçš„å€¼ã€‚

ç®€å•æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¯¹è±¡è®¤ä¸ºæ˜¯ä¸€ç»„é”®å€¼å¯¹çš„é›†åˆï¼Œç±»ä¼¼äº`HashMap`ï¼Œå¹¶ä¸”å€¼ä¸ä»…å¯ä»¥æ˜¯æ•°æ®ï¼Œä¹Ÿå¯ä»¥ä½¿ä¸€ä¸ªå‡½æ•°ã€‚



## ç†è§£å¯¹è±¡

### å¯¹è±¡çš„å±æ€§

**æ³¨æ„ï¼šECMA-262ä½¿ç”¨ä¸€äº›å†…éƒ¨ç‰¹æ€§æ¥æè¿°å±æ€§ç‰¹å¾ï¼Œå¼€å‘è€…ä¸èƒ½åœ¨JavaScriptä¸­ç›´æ¥è®¿é—®è¿™äº›ç‰¹æ€§ã€‚**

**è¿™äº›ç‰¹æ€§ç”¨ä¸¤ä¸ªä¸­æ‹¬å·åŒ…è£¹ï¼Œæ¯”å¦‚[[Enumerable]]**

å¯¹è±¡çš„å±æ€§åˆ†ä¸ºä¸¤ç§ï¼šæ•°æ®å±æ€§å’Œè®¿é—®å™¨å±æ€§ã€‚

- **æ•°æ®å±æ€§**

  - [[Configurable]]ï¼šå¯é…ç½®çš„ï¼Œè¡¨ç¤ºå±æ€§æ˜¯å¦å¯ä»¥é€šè¿‡deleteåˆ é™¤å¹¶é‡æ–°å®šä¹‰ï¼Œæ˜¯å¦å¯ä»¥ä¿®æ”¹å®ƒçš„ç‰¹æ€§ï¼Œä»¥åŠæ˜¯å¦å¯ä»¥æŠŠå®ƒä¿®æ”¹ä¸ºè®¿é—®å™¨å±æ€§ã€‚

    é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰ç›´æ¥å®šä¹‰åœ¨å¯¹è±¡ä¸Šçš„å±æ€§çš„è¿™ä¸ªç‰¹æ€§éƒ½æ˜¯trueã€‚

    

  - [[Enumerable]]ï¼šå¯æšä¸¾çš„ï¼Œè¡¨ç¤ºå±æ€§æ˜¯å¦å¯ä»¥é€šè¿‡for-inå¾ªç¯è¿”å›ã€‚

    é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰ç›´æ¥å®šä¹‰åœ¨å¯¹è±¡ä¸Šçš„å±æ€§çš„è¿™ä¸ªç‰¹æ€§éƒ½æ˜¯trueã€‚

    

  - [[Writable]]ï¼šå¯å†™çš„ï¼Œè¡¨ç¤ºå±æ€§çš„å€¼æ˜¯å¦å¯ä»¥è¢«ä¿®æ”¹ã€‚

    é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰ç›´æ¥å®šä¹‰åœ¨å¯¹è±¡ä¸Šçš„å±æ€§çš„è¿™ä¸ªç‰¹æ€§éƒ½æ˜¯trueã€‚

    

  - [[Value]]ï¼šå€¼ï¼Œè¡¨ç¤ºå±æ€§å®é™…æš´éœ²å‡ºæ¥çš„å€¼ã€‚

    è¿™ä¸ªç‰¹æ€§çš„é»˜è®¤å€¼ä¸ºundefinedã€‚

    

é™¤äº†[[value]]è¿™ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬æ— æ³•é€šè¿‡`.`çš„æ–¹å¼ç›´æ¥è®¿é—®å…¶ä»–ä¸‰ä¸ªç‰¹æ€§ã€‚

è¦ä¿®æ”¹å±æ€§çš„é»˜è®¤ç‰¹æ€§ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°`Object.defineProperty()`è¿™ä¸ªæ–¹æ³•ã€‚

è¿™ä¸ªæ–¹æ³•æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œè¦æ“ä½œçš„å¯¹è±¡ï¼Œå¯¹è±¡çš„å±æ€§åå’Œä¸€ä¸ªæè¿°ç¬¦å¯¹è±¡ã€‚

é€šè¿‡æœ€åä¸€ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬èƒ½å¤Ÿä¿®æ”¹å±æ€§çš„ç‰¹æ€§ã€‚æ¯”å¦‚ï¼š

```js
    let person = {
      name:"ZhangSan"
    }
    console.log(person.name + " First"); //ZhangSan First

    delete person.name;

    console.log(person.name + " Second"); //undefined Second

    Object.defineProperty(person,"name",{
      configurable:false,
      value:"Lisi",
    })

    delete person.name;

    console.log(person.name + " Last"); //Lisi Last
```

åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªpersonå¯¹è±¡ï¼Œå¹¶å°†å®ƒçš„nameå±æ€§èµ‹å€¼ä¸ºâ€œZhangSanâ€ï¼Œç„¶åæˆ‘ä»¬ç¬¬ä¸€æ¬¡æ‰“å°`person.name`ï¼Œå¯ä»¥æ‹¿åˆ°å¼ ä¸‰çš„åå­—ï¼Œ

ç„¶åæˆ‘ä»¬ç”¨`delete`åˆ é™¤personå¯¹è±¡çš„nameå±æ€§ï¼Œå†æ¬¡å°è¯•logè¾“å‡ºï¼Œå‘ç°è¯¥å€¼å·²ç»è¢«åˆ é™¤ï¼Œæ˜¾ç¤ºundefinedï¼Œ

ç„¶åæˆ‘ä»¬é€šè¿‡`Object.defineProperty()`å‡½æ•°ï¼Œå°†å¯¹è±¡çš„nameå±æ€§ä¿®æ”¹ä¸ºä¸å¯é…ç½®çš„ï¼Œå¹¶ä¸”èµ‹å€¼ä¸ºLisiï¼Œ

å†æ¬¡å°è¯•åˆ é™¤åæ‰“å°ï¼Œå‘ç°æˆ‘ä»¬å¹¶ä¸èƒ½é€šè¿‡`delete`æ–¹æ³•åˆ é™¤è¯¥å±æ€§ã€‚



æ­¤æ—¶ï¼Œæˆ‘ä»¬å¦‚æœæƒ³å†æ¬¡å°†è¯¥å¯¹è±¡å±æ€§ä¿®æ”¹ä¸ºå¯é…ç½®çš„ï¼Œé‚£ä¹ˆå°±ä¼šå‘ç”Ÿé”™è¯¯ã€‚

åœ¨ä¸Šè¿°ä»£ç ä¸­åœ¨åŠ å…¥ä¸€æ®µï¼Œå¦‚ä¸‹ï¼š

```js
    Object.defineProperty(person,"name",{
      configurable:true,
      value:"ZhangSan",
    })
```

ç„¶åæŸ¥çœ‹æ§åˆ¶å°

![image-20210930101129975](https://gitee.com/ashene/pic-go/raw/master/image-20210930101129975.png)



- **è®¿é—®å™¨å±æ€§**

  è®¿é—®å™¨å±æ€§ä¸åŒ…å«æ•°æ®å€¼ï¼Œç›¸åï¼Œä»–ä»¬åŒ…å«ä¸€ä¸ª`setter`å‡½æ•°å’Œä¸€ä¸ª`getter`å‡½æ•°

  - [[Configurable]]ï¼šå¯é…ç½®çš„ï¼Œè¡¨ç¤ºå±æ€§æ˜¯å¦å¯ä»¥é€šè¿‡deleteåˆ é™¤å¹¶é‡æ–°å®šä¹‰ï¼Œæ˜¯å¦å¯ä»¥ä¿®æ”¹å®ƒçš„ç‰¹æ€§ï¼Œä»¥åŠæ˜¯å¦å¯ä»¥æŠŠå®ƒä¿®æ”¹ä¸ºè®¿é—®å™¨å±æ€§ã€‚

    é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰ç›´æ¥å®šä¹‰åœ¨å¯¹è±¡ä¸Šçš„å±æ€§çš„è¿™ä¸ªç‰¹æ€§éƒ½æ˜¯trueã€‚

    

  - [[Enumerable]]ï¼šå¯æšä¸¾çš„ï¼Œè¡¨ç¤ºå±æ€§æ˜¯å¦å¯ä»¥é€šè¿‡for-inå¾ªç¯è¿”å›ã€‚

    é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰ç›´æ¥å®šä¹‰åœ¨å¯¹è±¡ä¸Šçš„å±æ€§çš„è¿™ä¸ªç‰¹æ€§éƒ½æ˜¯trueã€‚

    

  - [[Get]]ï¼šè·å–å‡½æ•°ï¼Œè¯»å–å±æ€§æ—¶è°ƒç”¨ã€‚é»˜è®¤å€¼ä¸ºundefinedã€‚

    

  - [[Set]]ï¼šè®¾ç½®å‡½æ•°ï¼Œå†™å…¥å±æ€§æ—¶è°ƒç”¨ï¼Œé»˜è®¤å€¼ä¸ºundefinedã€‚



è®¿é—®å™¨å±æ€§åŒæ ·æ˜¯ä¸èƒ½ç›´æ¥å®šä¹‰çš„ï¼Œå¿…é¡»é€šè¿‡`Object.defineProperty()`è¿™ä¸ªæ–¹æ³•ã€‚

```js
    let student ={
        year_:2018,
        age:22
    }

    Object.defineProperty(student,"year",{
      get(){
        return this.year_;
      },
      set(newValue){
        if(newValue > 2017){
          this.year_ = newValue;
          this.age = this.age + 2018 - newValue;
        }
      }
    })

    student.year = 2020;
    console.log(student.age);
```

åœ¨è¿™ä¸ªğŸŒ°ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå­¦ç”Ÿå¯¹è±¡ï¼Œå®ƒæœ‰ä¸¤ä¸ªé»˜è®¤å±æ€§ï¼šyear_å’Œageã€‚

**æ³¨æ„ï¼šyear_ä¸­çš„ä¸‹åˆ’çº¿ç”¨æ¥è¡¨ç¤ºè¯¥å±æ€§å¹¶ä¸å¸Œæœ›åœ¨å¯¹è±¡æ–¹æ³•å¤–éƒ¨è¢«è®¿é—®ï¼Œå³ç§æœ‰å˜é‡ï¼Œç±»ä¼¼äºJavaä¸­çš„`private`ã€‚**

ç„¶ååœ¨` Object.defineProperty()`æ–¹æ³•ä¸­ï¼Œä¸ºè¿™ä¸ªå¯¹è±¡å®šä¹‰äº†ä¸€ä¸ªæ–°å±æ€§yearï¼Œè¯¥å±æ€§ä¸ºè®¿é—®å™¨å±æ€§ï¼Œ

è·å–å‡½æ•°çš„`get`è¿”å›year_çš„å€¼ï¼Œ

è€Œ`set`å‡½æ•°åˆ™ä¼šåšä¸€äº›è®¡ç®—ï¼Œç®—å‡ºè¯¥å­¦ç”Ÿå½“å‰çš„å¹´é¾„ã€‚

**è¿™ç§ç”¨æ³•ç±»ä¼¼äºJavaä¸­ç»™å˜é‡å¢åŠ getå’Œsetæ–¹æ³•ï¼Œå½“ç„¶ï¼Œä¹Ÿå’ŒJavaä¸­ä¸€æ ·ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°å¹¶ä¸ä¸€å®šéƒ½éœ€è¦å®šä¹‰ï¼Œå¦‚æœåªè®¾ç½®äº†getï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯åªè¯»å±æ€§ï¼Œå¦‚æœåªè®¾ç½®äº†setï¼Œé‚£ä¹ˆä»–å°±æ˜¯åªå†™å±æ€§ï¼Œå½“ç„¶ï¼Œè¿™æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ã€‚**



### è¯»å–å±æ€§çš„ç‰¹æ€§

é€šè¿‡`` Object.defineProperty()``æ–¹æ³•å¯ä»¥ä¿®æ”¹å±æ€§çš„ç‰¹æ€§ï¼Œä½†åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½åªéœ€è¦çŸ¥é“å±æ€§çš„ç‰¹æ€§æ˜¯ä»€ä¹ˆï¼Œè€Œä¸éœ€è¦ä¿®æ”¹å®ƒï¼Œ

è¿™æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨`Object.getOwnPropertyDescriptor()`æ–¹æ³•å–å¾—æŒ‡å®šå±æ€§çš„æè¿°ç¬¦ã€‚

```js
    let desc =  Object.getOwnPropertyDescriptor(student,"year_");
    console.log(desc);
```

![image-20210930105112194](https://gitee.com/ashene/pic-go/raw/master/image-20210930105112194.png)

å½“ç„¶ï¼Œæœ‰æ—¶æˆ‘ä»¬ä¹Ÿéœ€è¦åŒæ—¶æ‹¿åˆ°ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§ã€‚

ECMAä¸ºæ­¤æ–°å¢äº†`Object.getOwnPropertyDescriptors()`æ–¹æ³•ï¼Œç»“æœå¦‚ä¸‹ï¼š

![image-20210930105316298](https://gitee.com/ashene/pic-go/raw/master/image-20210930105316298.png)



### åˆå¹¶å¯¹è±¡

è€ƒè™‘åˆ°JavaScriptå¼€å‘è€…è®¤ä¸ºåˆå¹¶(merge)ä¸¤ä¸ªå¯¹è±¡æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œæœ‰æ—¶è¿™ç§æ“ä½œä¹Ÿå«æ··å…¥("mixin")ã€‚

ECMA6æä¾›äº†`Object.assign()`æ–¹æ³•ã€‚

è¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªç›®æ ‡å¯¹è±¡å’Œä¸€ä¸ªæˆ–å¤šä¸ªæºå¯¹è±¡ä½œä¸ºå‚æ•°ã€‚

å°†æ¯ä¸ªå¯¹è±¡ä¸­**å¯æšä¸¾çš„**ï¼Œå³[[Enumable]]ç‰¹æ€§å€¼ä¸ºtrue

å’Œ**è‡ªæœ‰å±æ€§**(ç›´æ¥å®šä¹‰åœ¨å¯¹è±¡ä¸Šçš„å±æ€§ï¼Œä¸åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§åšåŒºåˆ†ï¼Œå¯ç”¨`Object.hasOwnproperty()`è¿›è¡Œåˆ¤æ–­ï¼Œè¿”å›trueå³ä¸ºè‡ªæœ‰å±æ€§)

å¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ã€‚

è¿™ä¸ªæ–¹æ³•ä¼šä½¿ç”¨æºå¯¹è±¡ä¸Šçš„[[Get]]å–å¾—å±æ€§å€¼ï¼Œç„¶åä½¿ç”¨ç›®æ ‡å¯¹è±¡ä¸Šçš„[[Set]]è®¾ç½®å±æ€§å€¼ã€‚

```js
    let target,source1,source2,result;
    target = {},
    source1 = {
      id:1,
      name:"src1"
    },
    source2 = {
      sid:2,
      sname:"src2"
    }

    result = Object.assign(target,source1,source2)

    console.log(result);	//{id: 1, name: 'src1', sid: 2, sname: 'src2'}
    console.log(target === result)	//true
```

é€šè¿‡è¿™ä¸ªğŸŒ°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°resultåŒ…å«äº†source1å’Œsource2å¯¹è±¡ä¸Šçš„å±æ€§å’Œå€¼ï¼Œ

å¹¶ä¸”è¯¥æ–¹æ³•ä¼šæŠŠè¿”å›å€¼ä¼ ç»™ç›®æ ‡å‚æ•°ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å¾—åˆ°`target === result`çš„ç»“æœä¸ºtrueã€‚



**æ³¨æ„ï¼šå¦‚æœæœ‰åŒåçš„å±æ€§ï¼Œä¼šè¢«åé¢çš„å€¼è¦†ç›–ã€‚**

â€‹			**å¦‚æœæºå¯¹è±¡ä¸­æœ‰æ–¹æ³•ï¼Œåªä¼šè°ƒç”¨è¯¥å¯¹è±¡ä¸Š çš„[[Get]]æ–¹æ³•ï¼Œå¹¶è·å¾—è¿”å›å€¼ï¼Œä¸ä¼šå°†æ–¹æ³•åˆå¹¶è‡³ç›®æ ‡å¯¹è±¡**ã€‚

â€‹			**å¦‚æœç›®æ ‡å¯¹è±¡ä¸Šå¯¹åº”çš„[[Set]]æ–¹æ³•æ²¡æœ‰æ‰§è¡Œèµ‹å€¼æ“ä½œï¼Œè¯¥å€¼å¹¶ä¸ä¼šä¼ é€’è¿‡æ¥ã€‚**

â€‹			**å¦‚æœèµ‹å€¼æœŸé—´å‡ºé”™ï¼Œåˆ™æ“ä½œä¼šç»ˆæ­¢å¹¶é€€å‡ºï¼Œ`Object.assign()`æ²¡æœ‰â€œå›æ»šâ€æ“ä½œã€‚**



### å¯¹è±¡æ ‡è¯†

JavaScriptä¸­ï¼Œä½¿ç”¨===æœ‰æ—¶ä¼šäº§ç”Ÿååˆ†ç³Ÿç³•çš„æƒ…å†µã€‚æ¯”å¦‚ï¼š

```js
    console.log(+0 == -0);	//true
    console.log(NaN === NaN);	//false
```



ä¸ºæ­¤ï¼ŒECMA6æ–°å¢äº†`Object.is()`æ–¹æ³•ã€‚

```js
    console.log(Object.is(+0,-0));	//false
    console.log(Object.is(NaN,NaN));	//true
```



### å¯¹è±¡è§£æ„

å¯¹è±¡è§£æ„å°±æ˜¯ä½¿ç”¨ä¸å¯¹è±¡ç›¸åŒ¹é…çš„ç»“æ„æ¥å®ç°å¯¹è±¡å±æ€§èµ‹å€¼ã€‚

```js
    let response = {
      code:"200",
      message:"Succeed",
      data:{
        id:1,
        title:"è§£æ„æ“ä½œ"
      }
    }
    
//ä¸ä½¿ç”¨å¯¹è±¡è§£æ„
    resultCode = response.code;
    resultData = response.data;
    resultMessage = response.message;

    console.log(resultCode);	//200
    console.log(resultMessage);	//Succeed
    console.log(resultData);	//{id: 1,title: "è§£æ„æ“ä½œ"}

//ä½¿ç”¨å¯¹è±¡è§£æ„
	let {code: code, message: msg, data} = response;
    console.log(code);	//200
    console.log(msg);	//Succeed
    console.log(data);	//{id: 1,title: "è§£æ„æ“ä½œ"}
```

ä½¿ç”¨å¯¹è±¡è§£æ„ï¼Œå¯ä»¥åŒæ—¶æ‰§è¡Œå¤šä¸ªèµ‹å€¼æ“ä½œã€‚



è§£æ„èµ‹å€¼ä¸ä¸€å®šéœ€è¦ä¸å¯¹è±¡çš„å±æ€§å®Œå…¨åŒ¹é…ã€‚èµ‹å€¼çš„æ—¶å€™å¯ä»¥å¿½ç•¥æŸäº›å€¼ï¼Œè€Œå¦‚æœå¼•ç”¨çš„å±æ€§ä¸å­˜åœ¨ï¼Œåˆ™ä¼šèµ‹é»˜è®¤å€¼undefinedï¼Œ

å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨è§£æ„èµ‹å€¼çš„åŒæ—¶å®šä¹‰é»˜è®¤å€¼ã€‚

```js
    let {code, message: msg, data, append='é¢å¤–é™„åŠ '} = response;

    console.log(append);	//é¢å¤–é™„åŠ 
```



**æ³¨æ„ï¼šå¦‚æœç»™äº‹å…ˆå£°æ˜å¥½çš„å˜é‡èµ‹å€¼ï¼Œåˆ™èµ‹å€¼è¡¨è¾¾å¼å¿…é¡»åŒ…å«åœ¨ä¸€å¯¹æ‹¬å·å†…ã€‚**	

```js
let resultCode , resultMessage , resultData;

({code: resultCode , message : resultMessage , data : resultData} = response )
```



**æ³¨æ„ï¼šä¸å¯¹è±¡åˆå¹¶ä¸€æ ·ï¼Œå¦‚æœè§£æ„è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œåˆ™æ•´ä¸ªè§£æ„èµ‹å€¼åªä¼šå®Œæˆä¸€éƒ¨åˆ†ã€‚**



## åˆ›å»ºå¯¹è±¡

é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç”¨`new Object()`çš„å‡½æ•°æ¥åˆ›å»ºå¯¹è±¡ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼æœ‰å¾ˆæ˜æ˜¾çš„ç¼ºé™·ã€‚

æˆ‘ä»¬æ¥çœ‹è¿™æ ·ä¸€æ®µä»£ç ï¼š

```js
    let person1 = new Object();
    person1.name = "zhangsan";
    person1.age = 20;
    person1.job = "doctor";
    person1.sayName = function(){
      console.log(this.sayName);
    }
```

åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬ç”¨`new Object()`çš„å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ª`person1`å¯¹è±¡ï¼Œå¹¶ä¸”ç»™`person1`å¯¹è±¡æ·»åŠ äº†å±æ€§å’Œæ–¹æ³•ã€‚è¿™ä¼¼ä¹æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œ

ä½†ç°åœ¨å¦‚æœæˆ‘ä»¬éœ€è¦ä¸€ä¸ª`person2`å¯¹è±¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦æŠŠä¸Šè¿°ä»£ç å†å¤åˆ¶ä¸€éï¼Œå¾ˆæ˜æ˜¾ï¼Œè¿™æ ·çš„ä»£ç å¹¶ä¸æ˜¯æˆ‘ä»¬æå€¡çš„ã€‚



### å·¥å‚æ¨¡å¼

åœ¨å·¥å‚æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç»Ÿä¸€çš„å‡½æ•°åˆ›é€ åŒä¸€ç±»å¯¹è±¡ã€‚

```js
//å·¥å‚æ¨¡å¼
function createPerson(name,age,job){
  let o = new Object();
  o.name = name;
  o.age = age;
  o.job = job;

  o.sayName = function(){
    console.log(this.name);
  }

  return o;
}

let person1 = createPerson("zhangsan",20,"doctor");
let person2 = createPerson("lisi",21,"teacher");
```

åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†`createPerson()`å‡½æ•°ï¼Œ

è¿™ä¸ªå‡½æ•°å¸®åŠ©æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„Objectï¼Œå¹¶ä¸”æ ¹æ®æˆ‘ä»¬ä¼ å…¥çš„å‚æ•°æ·»åŠ å±æ€§å¹¶èµ‹å€¼ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨å‡½æ•°å†…éƒ¨ä¸ºå¯¹è±¡æ·»åŠ æ–¹æ³•ï¼Œ

è¿™æ ·åšçš„å¥½å¤„æ˜¯æˆ‘ä»¬åœ¨éœ€è¦åˆ›å»ºå¤šä¸ªå¯¹è±¡æ—¶å¯ä»¥ç”¨ä¸€ç§æ›´ä¸ºç®€ä¾¿çš„æ–¹å¼å®ç°ï¼Œ

ä½¿ç”¨è¿™ç§æ¨¡å¼åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡å°±åƒæ˜¯å·¥å‚é‡Œç»Ÿä¸€ç”Ÿäº§å‡ºæ¥çš„äº§å“ï¼Œå› æ­¤ç§°ä¹‹ä¸ºå·¥å‚æ¨¡å¼ã€‚



è¿™ç§æ¨¡å¼å¯ä»¥è§£å†³åˆ›å»ºå¤šä¸ªç±»ä¼¼å¯¹è±¡çš„é—®é¢˜ï¼Œä½†æ˜¯ä»æ²¡æœ‰è§£å†³å¯¹è±¡æ ‡è¯†çš„é—®é¢˜ï¼ˆå³æ–°å»ºçš„å¯¹è±¡æ˜¯ä»€ä¹ˆç±»å‹ï¼‰ã€‚

```
console.log(person1.constructor);	//[Function: Object]
console.log(dog1.constructor);		//[Function: Object]
```



### æ„é€ å‡½æ•°æ¨¡å¼

```js
//æ„é€ å‡½æ•°æ¨¡å¼
function Person(name,age,job){
  this.name = name;
  this.age = age;
  this.job = job;

  this.sayName = function(){
    console.log(this.name);
  }
}

let person1 = new Person("zhangsan",40,"doctor");
```

å®é™…ä¸Šï¼Œä½¿ç”¨æ„é€ å‡½æ•°å’Œä½¿ç”¨å·¥å‚æ¨¡å¼åˆ›å»ºå¯¹è±¡å‡ ä¹æ˜¯ä¸€æ ·çš„ï¼Œé™¤äº†ä»¥ä¸‹å‡ ç‚¹ï¼š

- æ„é€ æ¨¡å¼æ²¡æœ‰æ˜¯ç”¨`new Object()`æ¥æ˜¾å¼çš„ åˆ›å»ºå¯¹è±¡ã€‚
- å±æ€§å’Œæ–¹æ³•ç›´æ¥èµ‹å€¼ç»™äº†this
- æ²¡æœ‰è¿”å›å€¼



æˆ‘ä»¬ä¸å¦¨æ¥çœ‹ä¸€ä¸‹ä½¿ç”¨æ„é€ å‡½æ•°çš„å…·ä½“æµç¨‹ï¼š

1. åœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡
2. è¿™ä¸ªæ–°å¯¹è±¡çš„[[Prototype]]ç‰¹æ€§è¢«å¤åˆ¶ä¸ºæ„é€ å‡½æ•°çš„prototypeå±æ€§
3. æ„é€ å‡½æ•°å†…éƒ¨çš„thisæŒ‡å‘è¿™ä¸ªæ–°å¯¹è±¡
4. æ‰§è¡Œæ„é€ å‡½æ•°å†…éƒ¨çš„ä»£ç ï¼ˆæ·»åŠ æ–¹æ³•å’Œå±æ€§ï¼‰
5. å¦‚æœæ„é€ å‡½æ•°å†…éƒ¨æœ‰è¿”å›å€¼ï¼Œåˆ™è¿”å›è¯¥å€¼ï¼Œå¦åˆ™ï¼Œè¿”å›åˆšåˆ›å»ºçš„æ–°å¯¹è±¡



è¿™æ¬¡ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æ„é€ å‡½æ•°æ¨¡å¼èƒ½å¦å¸®åŠ©æˆ‘ä»¬åˆ¤æ–­å¯¹è±¡çš„ç±»å‹ã€‚

```js
function Person(name,age,job){
  this.name = name;
  this.age = age;
  this.job = job;

  this.sayName = function(){
    console.log(this.name);
  }
}

function Dog(){

}

let person1 = new Person("zhangsan",40,"doctor");
let dog1 = new Dog();

console.log(person1.constructor); //[Function: Person]
console.log(dog1.constructor);    //[Function: Dog]
```

è¿™ä¸€æ¬¡ï¼Œé€šè¿‡å¯¹è±¡çš„`constructor`ï¼Œæˆ‘ä»¬å¾—åˆ°äº†å¯¹è±¡å‡†ç¡®çš„ç±»å‹ã€‚

å› æ­¤æˆ‘ä»¬å¯ä»¥çš„å‡ºç»“è®ºï¼Œæ„é€ å‡½æ•°æ¨¡å¼èƒ½å¤ŸåŒæ—¶è§£å†³**åˆ›å»ºå¤šä¸ªç±»ä¼¼å¯¹è±¡**å’Œ**å¯¹è±¡æ ‡è¯†**çš„é—®é¢˜ã€‚



é‚£ä¹ˆï¼Ÿæ„é€ å‡½æ•°æ¨¡å¼å°±æ˜¯æˆ‘ä»¬åˆ›å»ºå¯¹è±¡çš„ç»ˆææ–¹æ³•äº†å—ï¼Ÿ

å¾ˆæ˜æ˜¾ï¼Œç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚é‚£ä¹ˆæ„é€ å‡½æ•°æ¨¡å¼æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæˆ‘ä»¬åˆåº”è¯¥é€‰æ‹©ä»€ä¹ˆæ ·çš„æ–¹å¼åˆ›å»ºå¯¹è±¡å‘¢ï¼Ÿ

å…ˆæ¥å›ç­”ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œæ„é€ å‡½æ•°æ¨¡å¼æœ‰ä»€ä¹ˆé—®é¢˜



æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€æ®µä»£ç ï¼š

```js
function Person(name,age,job){
  this.name = name;
  this.age = age;
  this.job = job;

  this.sayName = function(){
    console.log(this.name);
  }

}

let person1 = new Person("zhangsan",40,"doctor");
let person2 = new Person("lisi",21,"student");

console.log(person1.sayName == person2.sayName);	//false
```

è¿™æ®µä»£ç æœ¬èº«æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œé—®é¢˜åœ¨äºå…¶é€»è¾‘ï¼Œ

å½“æˆ‘ä»¬ç”¨`new Person()`åˆ›å»ºå¯¹è±¡æ—¶ï¼Œå®é™…ä¸Šæ˜¯åœ¨å†…å­˜ä¸­å¼€è¾Ÿäº†ä¸€å—åŒºåŸŸï¼Œ

ç”±äºæ¯ä¸ªå®ä¾‹å¯¹è±¡çš„å±æ€§å€¼å¤§å¤šæ˜¯ä¸åŒçš„ï¼Œæ¯”å¦‚è¯´äººåï¼Œå¹´é¾„ï¼ŒèŒä¸šç­‰ç­‰ï¼Œæ‰€ä»¥æ¯ä¸ªå®ä¾‹å¯¹è±¡çš„å±æ€§å•ç‹¬å¼€è¾Ÿä¸€å—ç©ºé—´æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œ

ä½†æ˜¯æ–¹æ³•å‘¢ï¼Ÿå¦‚æœæ¯ä¸ªå¯¹è±¡çš„æ–¹æ³•éƒ½æ˜¯ä¸€æ ·çš„ï¼Œé‚£å°±æ²¡æœ‰å¿…è¦åœ¨æ¯ä¸ªå®ä¾‹å¯¹è±¡å†…éƒ¨éƒ½å•ç‹¬å¼€è¾Ÿä¸€å—åŒºåŸŸå»å­˜å‚¨å®ƒï¼Œè¿™æ ·ä¼šé€ æˆå¤§é‡å†…å­˜çš„æµªè´¹ã€‚

è§£å†³çš„åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼ŒæŠŠå‡½æ•°å®šä¹‰åœ¨æ„é€ å‡½æ•°å¤–éƒ¨å°±å¯ä»¥äº†

```js
function Person(name,age,job){
  this.name = name;
  this.age = age;
  this.job = job;

  this.sayName = sayName;

}

function sayName(){
  console.log(this.name);
}

let person1 = new Person("zhangsan",40,"doctor");
let person2 = new Person("lisi",21,"student");

console.log(person1.sayName == person2.sayName);	//true
```

é—®é¢˜ä¼¼ä¹æ˜¯è§£å†³äº†ï¼Ÿ

ä½†æ˜¯è¿™æ ·çš„ä»£ç åˆå¸¦æ¥äº†ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼Œ

æˆ‘ä»¬åœ¨å¯¹è±¡ä¸Šå®šä¹‰çš„æ–¹æ³•ï¼Œæˆ‘ä»¬æ˜¯å¸Œæœ›çš„å®ƒåªæœåŠ¡äºå¯¹è±¡æœ¬èº«çš„ï¼Œ

è€Œå°†å‡½æ•°å®šä¹‰è½¬ç§»åˆ°æ„é€ å‡½æ•°å¤–çš„æ–¹æ³•ï¼Œå°è£…äº†ä¸ªå¯‚å¯ã€‚

è¿™ä¸ªæ–°é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åŸå‹æ¨¡å¼è§£å†³ã€‚



### åŸå‹æ¨¡å¼

åœ¨ç†è§£åŸå‹æ¨¡å¼ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆææ¸…æ¥šä¸€ä¸ªæ¦‚å¿µï¼Œä»€ä¹ˆæ˜¯åŸå‹ï¼Ÿ

> æ¯ä¸ªå‡½æ•°éƒ½ä¼šåˆ›å»ºä¸€ä¸ªprototypeå±æ€§ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«åº”è¯¥ç”±ç‰¹å®šå¼•ç”¨ç±»å‹çš„å®ä¾‹å…±äº«çš„å±æ€§å’Œæ–¹æ³•ã€‚
>
> å®é™…ä¸Šï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯é€šè¿‡è°ƒç”¨æ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡çš„åŸå‹ã€‚
>
> ä½¿ç”¨åŸå‹å¯¹è±¡çš„å¥½å¤„æ˜¯ï¼Œåœ¨å®ƒä¸Šé¢å®šä¹‰çš„å±æ€§å’Œæ–¹æ³•å¯ä»¥è¢«å¯¹è±¡å®ä¾‹å…±äº«ã€‚
>
> åŸæ¥åœ¨æ„é€ å‡½æ•°ä¸­ç›´æ¥èµ‹ç»™å¯¹è±¡çš„å€¼ï¼Œå¯ä»¥ç›´æ¥èµ‹å€¼ç»™å®ƒä»¬çš„åŸå‹ã€‚

ç®€å•æ¥è¯´ï¼ŒåŸå‹å°±åƒæ˜¯çˆ¶äº²ï¼Œå®šä¹‰åœ¨å®ƒèº«ä¸Šçš„å±æ€§å’Œæ–¹æ³•éƒ½å¯ä»¥è¢«å„¿å­ï¼ˆå®ä¾‹å¯¹è±¡ï¼‰ç»§æ‰¿ã€‚



æ¥çœ‹ä¸€ä¸ªç®€å•çš„ğŸŒ°ï¼š

```js
function Person(){};

Person.prototype.name = "zhangsan";
Person.prototype.age = "40";
Person.prototype.job = "doctor";
Person.prototype.sayName = function(){
  console.log(this.name);
}

let person1 = new Person();
let person2 = new Person();

person1.sayName();  //zhangsan
person2.sayName();  //zhangsan

console.log(person1.sayName === person2.sayName); //true
```

åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç©ºçš„æ„é€ å‡½æ•°ï¼Œ

å¹¶åœ¨è¿™ä¸ªæ„é€ å‡½æ•°çš„åŸå‹ä¸Šæ·»åŠ äº†å±æ€§å’Œæ–¹æ³•ï¼Œ

ç„¶åæˆ‘ä»¬é€šè¿‡è¿™ä¸ªæ„é€ å‡½æ•°åˆ›å»ºå‡ºæ–°çš„å®ä¾‹å¯¹è±¡ï¼Œ

æœ€åæˆ‘ä»¬å‘ç°ï¼Œè¿™äº›å®ä¾‹å¯¹è±¡å¯ä»¥å…±äº«åŒä¸€ä¸ªæ–¹æ³•ï¼Œä¸ä»…å¦‚æ­¤ï¼Œåœ¨æ„é€ å‡½æ•°ä¸ºç©ºçš„æƒ…å†µä¸‹ï¼Œå®ä¾‹å¯¹è±¡è¿˜èƒ½è®¿é—®åˆ°æ„é€ å‡½æ•°åŸå‹ä¸Šçš„å¯¹è±¡ã€‚



åœ¨ä¸Šè¿°è¿‡ç¨‹ä¸­ï¼ŒåŸå‹åšäº†ä»€ä¹ˆï¼ŸåŸå‹çš„æœ¬è´¨åˆæ˜¯ä»€ä¹ˆï¼Ÿ



#### ç†è§£åŸå‹

æ— è®ºä½•æ—¶ï¼Œåªè¦åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œå°±ä¼šæŒ‰ç…§ç‰¹å®šçš„è§„åˆ™ä¸ºè¿™ä¸ªå‡½æ•°åˆ›å»ºä¸€ä¸ª`prototype`å±æ€§ï¼Œè¿™ä¸ªå±æ€§çš„å€¼æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘åŸå‹å¯¹è±¡ã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„åŸå‹å¯¹è±¡ä¼šè‡ªåŠ¨è·å¾—ä¸€ä¸ªåä¸ºconstructorçš„å±æ€§ï¼Œè¿™ä¸ªå±æ€§çš„å€¼ä¹Ÿæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸ä¹‹å…³è”çš„æ„é€ å‡½æ•°ã€‚

å¯¹äºå‰é¢çš„ğŸŒ°è€Œè¨€ï¼Œ`Person.prototype.constructor`æŒ‡å›Personã€‚



åœ¨è‡ªå®šä¹‰æ„é€ å‡½æ•°æ—¶ï¼ŒåŸå‹å¯¹è±¡åªä¼šé»˜è®¤è·å¾—`constructor`å±æ€§ï¼Œå…¶ä»–æ‰€æœ‰çš„æ–¹æ³•éƒ½ç»§æ‰¿ä¸Objectã€‚

æ¯æ¬¡è°ƒç”¨æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œè¿™ä¸ªå®ä¾‹å†…éƒ¨çš„[[Prototype]]æŒ‡é’ˆå°±ä¼šè¢«èµ‹å€¼ä¸ºæ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ã€‚

åœ¨Firefoxï¼ŒSafariå’ŒChromeä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡`_proto_`å±æ€§æ¥è®¿é—®å¯¹è±¡çš„åŸå‹ã€‚

åœ¨å…¶ä»–å®ç°ä¸­ï¼Œè¿™ä¸ªç‰¹æ€§è¢«å®Œå…¨éšè—äº†ã€‚



å…³é”®åœ¨äºè¿™ä¸€ç‚¹ï¼š

å®ä¾‹ä¸æ„é€ å‡½æ•°åŸå‹ä¹‹é—´æœ‰ç›´æ¥çš„è”ç³»ï¼Œä½†å®ä¾‹ä¸æ„é€ å‡½æ•°ä¹‹é—´æ²¡æœ‰ã€‚



![image-20211009130218150](https://gitee.com/ashene/pic-go/raw/master/image-20211009130218150.png)

é€šè¿‡è¿™å¼ å›¾ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆç›´è§‚çš„çœ‹å‡ºæ„é€ å‡½æ•°å’ŒåŸå‹å¯ä»¥é€šè¿‡`prototype`å’Œ`constructor`èƒ½å¤ŸæŒ‡å‘å¯¹æ–¹ã€‚

è€Œç”±æ„é€ å‡½æ•°åˆ›å»ºå‡ºæ¥çš„å®ä¾‹èƒ½å¤Ÿé€šè¿‡[[Prototype]]å±æ€§è®¿é—®åŸå‹çš„`constructor`

å½“ç„¶ï¼Œå‰æ–‡æˆ‘ä»¬æåˆ°è¿‡ä¸æ—¶æ‰€æœ‰å®ç°éƒ½å¯¹å¤–æš´éœ²äº†[[Prototype]]è¿™ä¸ªå±æ€§ï¼Œä½†å¯ä»¥ä½¿ç”¨i`sPrototypeOf()`æ–¹æ³•ç¡®å®šä¸¤ä¸ªå¯¹è±¡ä¹‹é—´çš„å…³ç³»ã€‚

```js
console.log(Person.prototype.isPrototypeOf(person1));	//true
console.log(Person.prototype.isPrototypeOf(person2));	//true
```

`person1`å’Œ`person2`éƒ½æœ‰[[prototype]]æŒ‡å‘`Person.prototype`,æ‰€ä»¥ç»“æœéƒ½è¿”å›trueã€‚

å®é™…ä¸Šæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡`Object.getProototypeOf()`æ–¹æ³•è·å¾—å®ä¾‹çš„åŸå‹ã€‚

```js
console.log(Object.getPrototypeOf(person1));

//è¾“å‡ºç»“æœ
{
  name: 'zhangsan',
  age: '40',
  job: 'doctor',
  sayName: [Function (anonymous)]
}
```



#### åŸå‹å±‚çº§

å½“æˆ‘ä»¬é€šè¿‡å¯¹è±¡è®¿é—®å±æ€§æ—¶ï¼Œä¼šæŒ‰ç…§è¿™ä¸ªå±æ€§çš„åç§°ä»å¯¹è±¡å®ä¾‹æœ¬èº«å¼€å§‹æœç´¢ï¼Œå¦‚æœåœ¨è¿™ä¸ªå®ä¾‹ä¸Šå‘ç°äº†ç›¸åº”çš„åç§°ï¼Œåˆ™è¿”å›å…¶å¯¹åº”çš„å€¼ã€‚

å¦‚æœæ²¡æœ‰æ‰¾åˆ°åŒåå±æ€§ï¼Œæ‰ä¼šé€šè¿‡æŒ‡é’ˆå»è®¿é—®åŸå‹ä¸Šçš„å¯¹åº”å±æ€§ã€‚

```js
function Person(){};

Person.prototype.name = "zhangsan";
Person.prototype.age = "40";
Person.prototype.job = "doctor";
Person.prototype.sayName = function(){
  console.log(this.name);
}

let person1 = new Person();
let person2 = new Person();

person1.name = "lisi";

console.log(person1.name);	//lisi
console.log(person2.name);	//zhangsan
```

è¿™æ®µä»£ç ä¸­æˆ‘ä»¬ç»™`person1`çš„`name`å±æ€§èµ‹å€¼ä¸º`â€œlisiâ€`,

æœ¬è´¨ä¸Šæ˜¯åœ¨å®ä¾‹å¯¹è±¡ä¸Šåˆ›å»ºäº†è¯¥å±æ€§ç„¶åå†è¿›è¡Œèµ‹å€¼ï¼Œè€Œä¸æ˜¯è¦†ç›–æ‰åŸå‹ä¸Šçš„å±æ€§å€¼,

è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ`person2`ä»ç„¶èƒ½å¤Ÿè®¿é—®åˆ°åŸå‹ä¸Šçš„å±æ€§ã€‚



> åªè¦ç»™å¯¹è±¡å®ä¾‹æ·»åŠ äº†ä¸€ä¸ªå±æ€§ï¼Œè¿™ä¸ªå±æ€§å°±è¢«é®è”½ï¼ˆShadowï¼‰åŸå‹å¯¹è±¡ä¸Šçš„åŒåå±æ€§ï¼Œ
>
> ä¹Ÿå°±æ˜¯è™½ç„¶ä¸ä¼šä¿®æ”¹å®ƒï¼Œä½†ä¼šå±è”½å¯¹å®ƒçš„è®¿é—®ã€‚
>
> å³ä½¿åœ¨å®ä¾‹ä¸ŠæŠŠè¿™ä¸ªå±æ€§è®¾ç½®ä¸º`null`ï¼Œä¹Ÿä¸ä¼šæ¢å¤å®ƒå’ŒåŸå‹çš„è”ç³»ã€‚
>
> ä¸è¿‡ï¼Œä½¿ç”¨`delete`æ“ä½œç¬¦å¯ä»¥å®Œå…¨åˆ é™¤å®ä¾‹ä¸Šçš„è¿™ä¸ªå±æ€§ï¼Œä»è€Œè®©æ ‡å¿—è§£æè¿‡ç¨‹èƒ½å¤Ÿç»§ç»­æœç´¢åŸå‹å¯¹è±¡ã€‚

```js
function Person(){};

Person.prototype.name = "zhangsan";
Person.prototype.age = "40";
Person.prototype.job = "doctor";
Person.prototype.sayName = function(){
  console.log(this.name);
}

let person1 = new Person();
let person2 = new Person();

person1.name = "lisi";

delete(person1.name)

console.log(person1.name);	//"zhangsan"
console.log(person2.name);	//"zhangsan"
```



æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦åˆ¤æ–­æŸä¸ªå±æ€§æ˜¯ä½äºå®ä¾‹å¯¹è±¡ä¸Šè¿˜æ˜¯åœ¨åŸå‹å¯¹è±¡ä¸Šï¼Œ

è¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦ä½¿ç”¨`hasOwnProperty()`æ–¹æ³•ï¼Œ

è¯¥æ–¹æ³•ç»§æ‰¿è‡ªObjectï¼Œä¼šåœ¨å±æ€§å­˜åœ¨äºè°ƒç”¨å®ƒçš„å®ä¾‹å¯¹è±¡ä¸Šæ—¶è¿”å›`true`

```js
function Person(){};

Person.prototype.name = "zhangsan";
Person.prototype.age = "40";
Person.prototype.job = "doctor";
Person.prototype.sayName = function(){
  console.log(this.name);
}

let person1 = new Person();
let person2 = new Person();

person1.name = "lisi";

console.log(person1.hasOwnProperty("name"));  //true
console.log(person2.hasOwnProperty("name"));  //false
```



#### åŸå‹å’Œin

åœ¨å•ç‹¬ä½¿ç”¨æ—¶ï¼Œ`in`æ“ä½œç¬¦ä¼šåœ¨å¯ä»¥é€šè¿‡å¯¹è±¡è®¿é—®æŒ‡å®šå±æ€§æ—¶è¿”å›trueï¼Œæ— è®ºå±æ€§åœ¨å®ä¾‹å¯¹è±¡ä¸Šè¿˜æ˜¯åŸå‹å¯¹è±¡ä¸Šã€‚

```js
console.log("name" in person1); //true
console.log("sayName" in person1);  //true
console.log("work" in person1); //false
```

`in`æ“ä½œç¬¦å¯ä»¥å’Œ`hasOwnProperty()`æ–¹æ³•ä¸€èµ·ä½¿ç”¨ï¼Œ

å½“`in`çš„è¿”å›ä¸ºtrueä¸”`hasOwnProperty()`è¿”å›çš„ç»“æœä¸ºfalseæ—¶ï¼Œè¯´æ˜å±æ€§åœ¨åŸå‹å¯¹è±¡ä¸Šã€‚



`in`ä¹Ÿå¯ä»¥åœ¨`for`å¾ªç¯ä¸­ä½¿ç”¨ï¼Œå¯ä»¥é€šè¿‡å¯¹è±¡è®¿é—®ä¸”å¯ä»¥è¢«æšä¸¾çš„å±æ€§éƒ½ä¼šè¿”å›ï¼ŒåŒæ ·åŒ…æ‹¬å®ä¾‹å±æ€§å’ŒåŸå‹å±æ€§ã€‚

é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰`Object.keys()`æ–¹æ³•å’Œ`Object.getOwnPropertyNames()`æ–¹æ³•

å‰è€…ä¼šè¿”å›å®ä¾‹å¯¹è±¡ä¸Šæ‰€æœ‰å¯æšä¸¾å±æ€§çš„åç§°çš„å­—ç¬¦ä¸²æ•°ç»„

åè€…åˆ™è¿”å›æ‰€æœ‰å®ä¾‹å±æ€§ï¼Œæ— è®ºæ˜¯å¦å¯ä»¥æšä¸¾ã€‚



> æ³¨æ„ï¼š`Object.getOwnPropertyNames()`ã€`Object.getOwnPropertySymbol()`ã€å’Œ`Object.assign()`çš„æšä¸¾é¡ºåºæ˜¯ç¡®å®šæ€§çš„ã€‚
>
> å…ˆä»¥å‡åºæšä¸¾æ•°å€¼é”®ï¼Œç„¶åä»¥æ’å…¥é¡ºåºæšä¸¾å­—ç¬¦ä¸²å’Œç¬¦å·é”®ã€‚



### åŸå‹ç›¸å…³

1. åŸå‹çš„å…¶ä»–è¯­æ³•

   è§‚å¯Ÿå‰æ–‡çš„ğŸŒ°ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°æ¯æ¬¡æˆ‘ä»¬ä¸ºåŸå‹æ·»åŠ å±æ€§æ—¶éƒ½æŠŠ`Person.prototype`é‡å†™äº†ä¸€éï¼Œ

   ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸é€‰æ‹©æ›´ç®€æ˜“çš„å­—é¢é‡æ–¹å¼å‘¢ï¼Ÿ

   ```js
   function Person(){};
   
   Person.prototype = {
     name : "zhangsan",
     age : "40",
     job : "doctor",
     sayName(){
       console.log(this.name);
     }
   }
   
   let person1 = new Person();
   let person2 = new Person();
   
   person1.name = "lisi";
   
   console.log(person1.name);  //lisi
   console.log(person2.name);  //zhangsan
   
   console.log(Person.prototype.constructor === Person); //false
   ```

   æˆ‘ä»¬çš„å®ä¾‹å¯¹è±¡ä»ç„¶å¯ä»¥æ­£å¸¸è®¿é—®åˆ°åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§

   ä½†æ˜¯æˆ‘ä»¬ä¹Ÿå‘ç°ï¼ŒåŸå‹å¯¹è±¡ä¸Šçš„æ„é€ å‡½æ•°ä¸å†æŒ‡å‘`Person`äº†

   å› ä¸ºæˆ‘ä»¬ç›´æ¥ç»™`Person.prototype`èµ‹å€¼çš„æ–¹å¼ï¼Œè¦†ç›–äº†åŸæœ¬çš„`constructor`ï¼Œ

   å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åŸå‹å¯¹è±¡ä¸Šæ˜¾å¼çš„å£°æ˜å®ƒçš„æ„é€ å‡½æ•°

   ```js
   function Person(){};
   
   Person.prototype = {
     constructor:Person,
     name : "zhangsan",
     age : "40",
     job : "doctor",
     sayName(){
       console.log(this.name);
     }
   }
   ```

   ä»¥è¿™ç§æ–¹å¼æ¢å¤`constructor`å±æ€§ä¼šåˆ›å»ºä¸€ä¸ª[[Enumerable]]ä¸º`true`çš„å±æ€§ã€‚

   è€ŒåŸç”Ÿçš„`constructor`å±æ€§é»˜è®¤æ˜¯ä¸å¯æšä¸¾çš„ã€‚

   å¦‚æœæƒ³ä¿æŒä¸€è‡´ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ä½¿ç”¨`Object.defineProperty()`æ–¹æ³•æ¥å®šä¹‰`constructor`å±æ€§ã€‚

   ```js
   Object.defineProperty(Person.prototype,"constructor",{
     enumerable: true,
     value: Person
   })
   ```

   

2. åŸå‹çš„åŠ¨æ€æ€§

   å› ä¸ºä»åŸå‹ä¸Šæœç´¢å€¼çš„è¿‡ç¨‹æ˜¯åŠ¨æ€çš„ï¼Œæ‰€ä»¥å³ä½¿å®ä¾‹åœ¨ä¿®æ”¹ä¹‹å‰å·²ç»å­˜åœ¨ï¼Œä»»ä½•æ—¶å€™å¯¹åŸå‹å¯¹è±¡æ‰€åšçš„ä¿®æ”¹ä¹Ÿä¼šåœ¨å®ä¾‹ä¸Šååº”å‡ºæ¥ã€‚

   ```js
   function Person(){}
   
   let person1 = new Person()
   
   Person.prototype.name = "zhangsan";
   
   console.log(person1.name);	//â€œzhangsanâ€
   ```

   

3. åŸç”Ÿå¯¹è±¡åŸå‹

   åŸå‹æ¨¡å¼ä¹‹æ‰€ä»¥é‡è¦ï¼Œä¸ä»…ä½“ç°åœ¨è‡ªå®šä¹‰ç±»å‹ä¸Šã€‚

   å®ƒä¹Ÿæ˜¯æ‰€æœ‰åŸç”Ÿå¼•ç”¨ç±»å‹çš„æ¨¡å¼ã€‚æ‰€æœ‰åŸç”Ÿå¼•ç”¨ç±»å‹çš„æ„é€ å‡½æ•°ï¼ˆåŒ…æ‹¬Objectï¼ŒArrayï¼ŒStringç­‰ï¼‰éƒ½åœ¨åŸå‹ä¸Šå®šä¹‰äº†å®ä¾‹æ–¹æ³•ã€‚

   

   æ ¹æ®åŸå‹æ¨¡å¼çš„ç‰¹ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨ç»™è¿™äº›åŸç”Ÿå¼•ç”¨ç±»å‹æ·»åŠ æ–¹æ³•

   ```js
   Array.prototype.getSum = function(){
     let sum = 0;
     this.forEach(element => {
       sum += element;
     });
     return sum;
   }
   
   let arr = [1,2,3,4,5];
   console.log(arr.getSum());  //15
   ```

   æˆ‘ä»¬æˆåŠŸåœ¨Arrayå¯¹è±¡ä¸Šè‡ªå®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥å®ç°è®¡ç®—æ•°ç»„çš„å’Œ

   ä½†ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¹¶ä¸æ¨èä¿®æ”¹åŸç”Ÿå¯¹è±¡ç±»å‹

   æ¨èçš„åšæ³•æ˜¯ï¼Œåˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ç±»ï¼Œå¹¶ç»§æ‰¿äºåŸç”Ÿç±»å‹ã€‚

   

4. åŸå‹çš„é—®é¢˜

   åŸå‹æ¨¡å¼ä¹Ÿå­˜åœ¨è‡ªå·±çš„é—®é¢˜ï¼Œæ¥çœ‹ä¸‹é¢çš„ğŸŒ°ï¼š

   ```js
   function Person(){}
   
   Person.prototype = {
     constructor: Person,
     name:"zhangsan",
     age:"40",
     job:"doctor",
   
     friends:["lisi","wangwu"],
   
     sayName(){
       console.log(this.name);
     }
   }
   
   let person1 = new Person();
   let person2 = new Person();
   
   person1.friends.push("xiaoming");
   console.log(person1.friends); //[ 'lisi', 'wangwu', 'xiaoming' ]
   console.log(person2.friends); //[ 'lisi', 'wangwu', 'xiaoming' ]
   ```

   å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åœ¨`person1`ä¸Šæ·»åŠ çš„æœ‹å‹`"xiaoming"`ä¹Ÿè¢«æ·»åŠ åˆ°äº†`person2`çš„`friends`å±æ€§ä¸Š

   åŸå‹æ¨¡å¼æœ€å¤§çš„ä¼˜åŠ¿`å…±äº«`ï¼Œæ­¤æ—¶æˆäº†æˆ‘ä»¬çš„æ¡æ¢ã€‚

   

   ä¸€èˆ¬æ¥è¯´ï¼Œä¸åŒçš„å®ä¾‹åº”è¯¥æœ‰å±äºè‡ªå·±çš„å±æ€§å‰¯æœ¬ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå®é™…å¼€å‘ä¸­é€šå¸¸ä¸å•ç‹¬ä½¿ç”¨åŸå‹æ¨¡å¼çš„åŸå› ã€‚
